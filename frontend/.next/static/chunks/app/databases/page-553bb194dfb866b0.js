(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39],{3734:(e,s,a)=>{Promise.resolve().then(a.bind(a,9093))},9093:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(5155),n=a(2115),r=a(7168),l=a(1539),c=a(4213),i=a(7434),d=a(7580),o=a(4616),x=a(8145),m=a(8482),u=a(9852),h=a(1397),j=a(1243),p=a(7924),g=a(1154),N=a(381),b=a(2525),f=a(4357),v=a(3082);function y(e){let{onSelect:s}=e,{deployments:a,loading:l,error:i,fetchDeployments:d,deleteDeployment:o,clearError:y}=(0,v.g)(),[w,C]=(0,n.useState)(""),[k,A]=(0,n.useState)(null);(0,n.useEffect)(()=>{d()},[d]);let _=e=>{switch(e){case"running":return"bg-green-500";case"creating":return"bg-blue-500 animate-pulse";case"maintenance":return"bg-yellow-500";case"failed":return"bg-red-500";case"stopped":default:return"bg-gray-500";case"deleting":return"bg-red-400 animate-pulse"}},S=e=>{switch(e){case"running":return"Running";case"creating":return"Creating...";case"maintenance":return"Maintenance";case"failed":return"Failed";case"stopped":return"Stopped";case"deleting":return"Deleting...";default:return"Unknown"}},D=e=>{switch(e){case"postgresql":return"\uD83D\uDC18";case"redis":return"\uD83D\uDD34";case"mongodb":return"\uD83C\uDF43";case"mysql":return"\uD83D\uDC2C";case"influxdb":return"\uD83D\uDCCA";default:return"\uD83D\uDCBE"}},L=(e,s)=>{s.stopPropagation(),navigator.clipboard.writeText(e)},P=async(e,s)=>{if(s.stopPropagation(),confirm("Are you sure you want to delete ".concat(e.name,"? This action cannot be undone."))){A(e.id);try{await o(e.id)}finally{A(null)}}},$=a.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())||e.type.toLowerCase().includes(w.toLowerCase())||e.region.toLowerCase().includes(w.toLowerCase()));return i?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(j.A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load deployments"}),(0,t.jsx)("p",{className:"text-neutral-400 mb-4",children:i}),(0,t.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,t.jsx)(r.$,{onClick:()=>{y(),d()},variant:"outline",className:"border-red-500 hover:bg-red-500/10",children:"Try Again"}),(0,t.jsx)(r.$,{onClick:y,variant:"ghost",children:"Dismiss"})]})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"relative max-w-md",children:[(0,t.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutral-400"}),(0,t.jsx)(u.p,{placeholder:"Search databases...",value:w,onChange:e=>C(e.target.value),className:"pl-10 bg-neutral-900 border-neutral-700 focus:border-orange-500"})]}),l&&0===a.length&&(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(g.A,{className:"w-12 h-12 text-orange-500 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-neutral-400",children:"Loading deployments..."})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:$.map(e=>(0,t.jsxs)(m.Zp,{className:"bg-neutral-900 border-neutral-800 hover:border-orange-500/50 transition-all duration-200 cursor-pointer group",onClick:()=>s(e),children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:D(e.type)}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)(m.ZB,{className:"text-lg font-mono truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(_(e.status))}),(0,t.jsx)("span",{className:"text-sm text-neutral-400 capitalize",children:e.type}),(0,t.jsx)(x.E,{variant:"secondary",className:"text-xs",children:e.region})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(r.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:a=>{a.stopPropagation(),s(e)},children:(0,t.jsx)(N.A,{className:"w-4 h-4"})}),(0,t.jsx)(r.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>P(e,s),disabled:k===e.id,children:k===e.id?(0,t.jsx)(g.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(b.A,{className:"w-4 h-4 text-red-400"})})]})]})}),(0,t.jsxs)(m.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Status"}),(0,t.jsx)("span",{className:"font-medium ".concat("running"===e.status?"text-green-400":"failed"===e.status?"text-red-400":"creating"===e.status||"deleting"===e.status?"text-blue-400":"text-yellow-400"),children:S(e.status)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Storage"}),(0,t.jsxs)("span",{children:[e.storage.used,e.storage.unit," / ",e.storage.total,e.storage.unit]})]}),(0,t.jsx)(h.k,{value:e.storage.used/e.storage.total*100,className:"h-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Connections"}),(0,t.jsxs)("span",{children:[e.connections.active," / ",e.connections.max]})]}),(0,t.jsx)(h.k,{value:e.connections.active/e.connections.max*100,className:"h-2"})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"CPU"}),(0,t.jsxs)("span",{children:[e.resource_usage.cpu_cores," cores"]})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Memory"}),(0,t.jsxs)("span",{children:[(e.resource_usage.memory_mb/1024).toFixed(1)," GB"]})]})]}),"running"===e.status&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-neutral-400 mb-2",children:"Connection String"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-neutral-800 rounded font-mono text-xs",children:[(0,t.jsx)("span",{className:"flex-1 truncate",children:e.connection_string}),(0,t.jsx)(r.$,{size:"sm",variant:"ghost",onClick:s=>L(e.connection_string,s),className:"h-6 w-6 p-0 hover:bg-neutral-700",children:(0,t.jsx)(f.A,{className:"w-3 h-3"})})]})]}),(0,t.jsx)("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-neutral-800",children:(0,t.jsxs)("span",{className:"text-neutral-400",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})})]})]},e.id))}),0===$.length&&!l&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(c.A,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:w?"No databases found":"No database deployments"}),(0,t.jsx)("p",{className:"text-neutral-400 mb-4",children:w?"Try adjusting your search terms":"Deploy your first database to get started"})]})]})}var w=a(4489),C=a(756);function k(){let[e,s]=(0,n.useState)("list"),[a,x]=(0,n.useState)(null),m=()=>{s("list"),x(null)};return(0,t.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,t.jsx)("div",{className:"fixed left-0 top-0 h-full w-64 bg-neutral-900 border-r border-neutral-800",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(l.A,{className:"w-5 h-5 text-black"})}),(0,t.jsx)("span",{className:"font-bold text-xl",children:"CodeRunner"})]}),(0,t.jsxs)("nav",{className:"space-y-2",children:[(0,t.jsxs)("a",{href:"/",className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-neutral-800 transition-colors",children:[(0,t.jsx)(c.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Deployments"})]}),(0,t.jsxs)("a",{href:"/projects",className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-neutral-800 transition-colors",children:[(0,t.jsx)(i.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Projects"})]}),(0,t.jsxs)("a",{href:"/databases",className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-orange-500/20 text-orange-400",children:[(0,t.jsx)(c.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Databases"})]}),(0,t.jsxs)("a",{href:"/team",className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-neutral-800 transition-colors",children:[(0,t.jsx)(d.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Team"})]})]})]})}),(0,t.jsxs)("div",{className:"ml-64",children:["list"===e&&(0,t.jsx)("header",{className:"border-b border-neutral-800 p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Databases"}),(0,t.jsx)("p",{className:"text-neutral-400 mt-1",children:"Manage your database instances"})]}),(0,t.jsxs)(r.$,{onClick:()=>{s("deploy")},className:"bg-orange-500 hover:bg-orange-600 text-black font-medium",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"New Database"]})]})}),(0,t.jsxs)("div",{className:"p-6",children:["list"===e&&(0,t.jsx)(y,{onSelect:e=>{x(e),s("details")}}),"details"===e&&a&&(0,t.jsx)(w.A,{deployment:a,onBack:m}),"deploy"===e&&(0,t.jsx)(C.A,{onBack:m,onSuccess:()=>{s("list")}})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[277,41,777,682,219,287,406,309,489,756,441,684,358],()=>s(3734)),_N_E=e.O()}]);