"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{1886:(e,t,a)=>{a.d(t,{A:()=>l,m:()=>n});var r=a(3464),o=a(7383);let s=r.A.create({baseURL:"http://localhost:8080/api",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=o.A.get("auth-token")||localStorage.getItem("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&!a._retry&&(a._retry=!0,o.A.remove("auth-token"),localStorage.removeItem("auth-token"),window.location.href="/auth"),Promise.reject(e)});let n={auth:{login:(e,t)=>s.post("/auth/login",{email:e,password:t}),register:(e,t)=>s.post("/auth/register",{email:e,password:t}),verify:()=>s.get("/auth/verify"),logout:()=>s.post("/auth/logout")},deployments:{list:()=>s.get("/deployments"),get:e=>s.get("/deployments/".concat(e)),create:e=>s.post("/deploy",e),delete:e=>s.delete("/deployments/".concat(e)),control:(e,t)=>s.post("/deployments/".concat(e,"/").concat(t)),logs:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return s.get("/websocket/deployments/".concat(e,"/logs?tail=").concat(t))},metrics:e=>s.get("/metrics/deployment/".concat(e))},projects:{list:()=>s.get("/projects"),get:e=>s.get("/projects/".concat(e)),create:e=>s.post("/projects",e),update:(e,t)=>s.put("/projects/".concat(e),t),delete:e=>s.delete("/projects/".concat(e))},databases:{listDeployments:()=>s.get("/orchestrator/deployments"),getDeployment:e=>s.get("/orchestrator/deployments/".concat(e)),deploy:e=>s.post("/orchestrator/deploy",e),deleteDeployment:e=>s.delete("/orchestrator/deployments/".concat(e)),listTemplates:()=>s.get("/orchestrator/templates"),getTemplate:e=>s.get("/orchestrator/templates/".concat(e)),listTenants:e=>s.get("/orchestrator/".concat(e,"/tenants")),createTenant:(e,t)=>s.post("/orchestrator/".concat(e,"/tenants"),t),deleteTenant:(e,t)=>s.delete("/orchestrator/".concat(e,"/tenants/").concat(t)),listBackups:e=>s.get("/orchestrator/".concat(e,"/backups")),createBackup:(e,t)=>s.post("/orchestrator/".concat(e,"/backups"),t),restoreBackup:(e,t)=>s.post("/orchestrator/".concat(e,"/backups/").concat(t,"/restore")),deleteBackup:(e,t)=>s.delete("/orchestrator/".concat(e,"/backups/").concat(t)),getMetrics:e=>s.get("/orchestrator/".concat(e,"/metrics"))},system:{health:()=>s.get("/health"),metrics:()=>s.get("/metrics/current"),status:()=>s.get("/websocket/status")}},l=s},2714:(e,t,a)=>{a.d(t,{J:()=>d});var r=a(5155),o=a(2115),s=a(968),n=a(2085),l=a(3999);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(s.b,{ref:t,className:(0,l.cn)(c(),a),...o})});d.displayName=s.b.displayName},3082:(e,t,a)=>{a.d(t,{g:()=>n});var r=a(5453),o=a(6786),s=a(1886);let n=(0,r.v)()((0,o.lt)((e,t)=>({deployments:[],templates:[],selectedDeployment:null,tenants:new Map,backups:new Map,metrics:new Map,loading:!1,error:null,wsConnections:new Map,setLoading:t=>e({loading:t}),setError:t=>e({error:t}),clearError:()=>e({error:null}),setSelectedDeployment:t=>e({selectedDeployment:t}),fetchDeployments:async()=>{try{e({loading:!0,error:null});let t=await s.m.databases.listDeployments();e({deployments:t.data.deployments||[],loading:!1})}catch(t){console.error("Failed to fetch deployments:",t),e({error:t instanceof Error?t.message:"Failed to fetch deployments",loading:!1})}},fetchTemplates:async()=>{try{e({loading:!0,error:null});let t=await s.m.databases.listTemplates();e({templates:t.data.templates||[],loading:!1})}catch(t){console.error("Failed to fetch templates:",t),e({error:t instanceof Error?t.message:"Failed to fetch templates",loading:!1})}},deployDatabase:async a=>{try{e({loading:!0,error:null}),await s.m.databases.deploy(a),await t().fetchDeployments(),e({loading:!1})}catch(t){console.error("Failed to deploy database:",t),e({error:t instanceof Error?t.message:"Failed to deploy database",loading:!1})}},deleteDeployment:async t=>{try{e({loading:!0,error:null}),await s.m.databases.deleteDeployment(t),e(e=>{var a;return{deployments:e.deployments.filter(e=>e.id!==t),selectedDeployment:(null===(a=e.selectedDeployment)||void 0===a?void 0:a.id)===t?null:e.selectedDeployment,loading:!1}})}catch(t){console.error("Failed to delete deployment:",t),e({error:t instanceof Error?t.message:"Failed to delete deployment",loading:!1})}},fetchTenants:async t=>{try{let a=await s.m.databases.listTenants(t);e(e=>({tenants:new Map(e.tenants.set(t,a.data.tenants||[]))}))}catch(t){console.error("Failed to fetch tenants:",t),e({error:t instanceof Error?t.message:"Failed to fetch tenants"})}},createTenant:async(a,r)=>{try{e({loading:!0,error:null}),await s.m.databases.createTenant(a,r),await t().fetchTenants(a),e({loading:!1})}catch(t){console.error("Failed to create tenant:",t),e({error:t instanceof Error?t.message:"Failed to create tenant",loading:!1})}},deleteTenant:async(a,r)=>{try{e({loading:!0,error:null}),await s.m.databases.deleteTenant(a,r),await t().fetchTenants(a),e({loading:!1})}catch(t){console.error("Failed to delete tenant:",t),e({error:t instanceof Error?t.message:"Failed to delete tenant",loading:!1})}},fetchBackups:async t=>{try{let a=await s.m.databases.listBackups(t);e(e=>({backups:new Map(e.backups.set(t,a.data.backups||[]))}))}catch(t){console.error("Failed to fetch backups:",t),e({error:t instanceof Error?t.message:"Failed to fetch backups"})}},createBackup:async(a,r)=>{try{e({loading:!0,error:null}),await s.m.databases.createBackup(a,{type:r}),await t().fetchBackups(a),e({loading:!1})}catch(t){console.error("Failed to create backup:",t),e({error:t instanceof Error?t.message:"Failed to create backup",loading:!1})}},restoreBackup:async(t,a)=>{try{e({loading:!0,error:null}),await s.m.databases.restoreBackup(t,a),e({loading:!1})}catch(t){console.error("Failed to restore backup:",t),e({error:t instanceof Error?t.message:"Failed to restore backup",loading:!1})}},deleteBackup:async(a,r)=>{try{e({loading:!0,error:null}),await s.m.databases.deleteBackup(a,r),await t().fetchBackups(a),e({loading:!1})}catch(t){console.error("Failed to delete backup:",t),e({error:t instanceof Error?t.message:"Failed to delete backup",loading:!1})}},subscribeToMetrics:a=>{let r=new WebSocket("".concat("http://localhost:8080/api".replace("http","ws")||"ws://localhost:8080","/api/websocket"));r.onopen=()=>{r.send(JSON.stringify({type:"subscribe",topic:"database:".concat(a,":metrics")}))},r.onmessage=t=>{try{let r=JSON.parse(t.data);"database:metrics"===r.type&&e(e=>({metrics:new Map(e.metrics.set(a,r.payload))}))}catch(e){console.error("Failed to parse WebSocket message:",e)}},r.onerror=e=>{console.error("WebSocket error:",e)},r.onclose=()=>{setTimeout(()=>{t().wsConnections.has(a)&&t().subscribeToMetrics(a)},5e3)},e(e=>({wsConnections:new Map(e.wsConnections.set(a,r))}))},unsubscribeFromMetrics:a=>{let r=t().wsConnections.get(a);r&&(r.close(),e(e=>{let t=new Map(e.wsConnections);return t.delete(a),{wsConnections:t}}))}}),{name:"database-store",partialize:e=>({deployments:e.deployments,templates:e.templates,selectedDeployment:e.selectedDeployment})}))},3999:(e,t,a)=>{a.d(t,{cn:()=>s});var r=a(2596),o=a(9688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}},5784:(e,t,a)=>{a.d(t,{bq:()=>u,eb:()=>y,gC:()=>g,l6:()=>i,yv:()=>p});var r=a(5155),o=a(2115),s=a(8890),n=a(6474),l=a(7863),c=a(5196),d=a(3999);let i=s.bL;s.YJ;let p=s.WT,u=o.forwardRef((e,t)=>{let{className:a,children:o,...l}=e;return(0,r.jsxs)(s.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[o,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=s.l9.displayName;let m=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(s.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});m.displayName=s.PP.displayName;let f=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(s.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});f.displayName=s.wn.displayName;let g=o.forwardRef((e,t)=>{let{className:a,children:o,position:n="popper",...l}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,r.jsx)(m,{}),(0,r.jsx)(s.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,r.jsx)(f,{})]})})});g.displayName=s.UC.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(s.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...o})}).displayName=s.JU.displayName;let y=o.forwardRef((e,t)=>{let{className:a,children:o,...n}=e;return(0,r.jsxs)(s.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.VF,{children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})}),(0,r.jsx)(s.p4,{children:o})]})});y.displayName=s.q7.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(s.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...o})}).displayName=s.wv.displayName},7168:(e,t,a)=>{a.d(t,{$:()=>d});var r=a(5155),o=a(2115),s=a(6634),n=a(2085),l=a(3999);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,t)=>{let{className:a,variant:o,size:n,asChild:d=!1,...i}=e,p=d?s.DX:"button";return(0,r.jsx)(p,{className:(0,l.cn)(c({variant:o,size:n,className:a})),ref:t,...i})});d.displayName="Button"},8145:(e,t,a)=>{a.d(t,{E:()=>l});var r=a(5155);a(2115);var o=a(2085),s=a(3999);let n=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...o}=e;return(0,r.jsx)("div",{className:(0,s.cn)(n({variant:a}),t),...o})}},8482:(e,t,a)=>{a.d(t,{Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>l});var r=a(5155),o=a(2115),s=a(3999);let n=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...o})});n.displayName="Card";let l=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...o})});l.displayName="CardHeader";let c=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...o})});c.displayName="CardTitle",o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...o})}).displayName="CardDescription";let d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...o})});d.displayName="CardContent",o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...o})}).displayName="CardFooter"},9852:(e,t,a)=>{a.d(t,{p:()=>n});var r=a(5155),o=a(2115),s=a(3999);let n=o.forwardRef((e,t)=>{let{className:a,type:o,...n}=e;return(0,r.jsx)("input",{type:o,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"}}]);