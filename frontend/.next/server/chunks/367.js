exports.id=367,exports.ids=[367],exports.modules={9438:(e,t,o)=>{"use strict";o.d(t,{n:()=>c});var n=o(26787),s=o(59350),r=o(15659),i=o(59556),a=o(38406);let c=(0,n.v)()((0,s.Zr)((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(t,o)=>{e({isLoading:!0,error:null});try{let{token:n,userId:s}=(await i.A.post("/auth/login",{email:t,password:o})).data;r.A.set("auth-token",n,{expires:7}),localStorage.setItem("auth-token",n),i.A.defaults.headers.common.Authorization=`Bearer ${n}`,e({token:n,user:{id:s,email:t,planType:"free"},isAuthenticated:!0,isLoading:!1,error:null});try{let e=a.X.getState();await e.connectWebSocket(n)}catch(e){console.warn("Failed to connect WebSocket after login:",e)}}catch(t){throw e({isLoading:!1,error:t.response?.data?.error||"Login failed"}),t}},register:async(o,n)=>{e({isLoading:!0,error:null});try{let{userId:e}=(await i.A.post("/auth/register",{email:o,password:n})).data;await t().login(o,n)}catch(t){throw e({isLoading:!1,error:t.response?.data?.error||"Registration failed"}),t}},logout:()=>{try{a.X.getState().disconnectWebSocket()}catch(e){console.warn("Failed to disconnect WebSocket during logout:",e)}r.A.remove("auth-token"),localStorage.removeItem("auth-token"),delete i.A.defaults.headers.common.Authorization,e({user:null,token:null,isAuthenticated:!1,error:null})},checkAuth:async()=>{let o=r.A.get("auth-token")||localStorage.getItem("auth-token");if(!o){e({isAuthenticated:!1});return}i.A.defaults.headers.common.Authorization=`Bearer ${o}`;try{let t=await i.A.get("/auth/verify");e({token:o,user:t.data.user,isAuthenticated:!0});try{let e=a.X.getState();e.isWebSocketConnected||await e.connectWebSocket(o)}catch(e){console.warn("Failed to connect WebSocket after auth check:",e)}}catch(e){t().logout()}},clearError:()=>e({error:null})}),{name:"auth-storage",partialize:e=>({token:e.token,user:e.user})}))},11036:(e,t,o)=>{Promise.resolve().then(o.bind(o,52581))},14380:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,86346,23)),Promise.resolve().then(o.t.bind(o,27924,23)),Promise.resolve().then(o.t.bind(o,35656,23)),Promise.resolve().then(o.t.bind(o,40099,23)),Promise.resolve().then(o.t.bind(o,38243,23)),Promise.resolve().then(o.t.bind(o,28827,23)),Promise.resolve().then(o.t.bind(o,62763,23)),Promise.resolve().then(o.t.bind(o,97173,23))},24934:(e,t,o)=>{"use strict";o.d(t,{$:()=>l});var n=o(60687),s=o(43210),r=o(11329),i=o(24224),a=o(96241);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef(({className:e,variant:t,size:o,asChild:s=!1,...i},l)=>{let d=s?r.DX:"button";return(0,n.jsx)(d,{className:(0,a.cn)(c({variant:t,size:o,className:e})),ref:l,...i})});l.displayName="Button"},27532:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,16444,23)),Promise.resolve().then(o.t.bind(o,16042,23)),Promise.resolve().then(o.t.bind(o,88170,23)),Promise.resolve().then(o.t.bind(o,49477,23)),Promise.resolve().then(o.t.bind(o,29345,23)),Promise.resolve().then(o.t.bind(o,12089,23)),Promise.resolve().then(o.t.bind(o,46577,23)),Promise.resolve().then(o.t.bind(o,31307,23))},38406:(e,t,o)=>{"use strict";o.d(t,{X:()=>c});var n=o(26787),s=o(59556),r=o(57405);class i{constructor(){this.socket=null,this.token=null,this.reconnectTimer=null,this.heartbeatTimer=null,this.eventHandlers=new Map,this.state={connected:!1,connecting:!1,error:null,reconnectAttempts:0,subscriptions:new Set},this.maxReconnectAttempts=10,this.reconnectDelay=1e3,this.heartbeatInterval=3e4,this.connectionTimeout=5e3,this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.handleError=this.handleError.bind(this),this.startHeartbeat=this.startHeartbeat.bind(this),this.stopHeartbeat=this.stopHeartbeat.bind(this)}connect(e){return new Promise((t,o)=>{if(this.state.connecting||this.socket?.connected)return t();this.token=e,this.state.connecting=!0,this.state.error=null;let n="http://localhost:8080/api".replace(/^https?/,"ws")||0;console.log(`🔌 Connecting to WebSocket: ${n}`),this.socket=(0,r.io)(n,{transports:["websocket"],timeout:this.connectionTimeout,auth:{token:e},reconnection:!1}),this.socket.on("connect",()=>{this.handleConnect(),t()}),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("connect_error",e=>{this.handleError(e),o(e)}),this.socket.on("error",this.handleError),this.setupEventListeners();let s=setTimeout(()=>{this.state.connecting&&(this.handleError(Error("Connection timeout")),o(Error("Connection timeout")))},this.connectionTimeout);this.socket.on("connect",()=>clearTimeout(s))})}disconnect(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.stopHeartbeat(),this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this.state={connected:!1,connecting:!1,error:null,reconnectAttempts:0,subscriptions:new Set},console.log("\uD83D\uDD0C WebSocket disconnected"),this.emit("connection:status",{connected:!1,timestamp:new Date().toISOString()})}subscribeToDeployment(e){if(!this.socket?.connected){console.warn("Cannot subscribe: WebSocket not connected");return}!this.state.subscriptions.has(e)&&(console.log(`📡 Subscribing to deployment: ${e}`),this.socket.emit("subscribe:deployment",{deploymentId:e}),this.state.subscriptions.add(e))}unsubscribeFromDeployment(e){this.socket?.connected&&this.state.subscriptions.has(e)&&(console.log(`📡 Unsubscribing from deployment: ${e}`),this.socket.emit("unsubscribe:deployment",{deploymentId:e}),this.state.subscriptions.delete(e))}on(e,t){this.eventHandlers.has(e)||this.eventHandlers.set(e,new Set),this.eventHandlers.get(e).add(t)}off(e,t){let o=this.eventHandlers.get(e);o&&o.delete(t)}emit(e,t){let o=this.eventHandlers.get(e);o&&o.forEach(o=>{try{o(t)}catch(t){console.error(`Error in WebSocket event handler for ${e}:`,t)}})}getState(){return{...this.state}}isConnected(){return this.state.connected&&this.socket?.connected===!0}getSubscriptions(){return Array.from(this.state.subscriptions)}handleConnect(){console.log("✅ WebSocket connected successfully"),this.state={...this.state,connected:!0,connecting:!1,error:null,reconnectAttempts:0},this.startHeartbeat(),this.emit("connection:status",{connected:!0,timestamp:new Date().toISOString()}),this.state.subscriptions.forEach(e=>{this.socket?.emit("subscribe:deployment",{deploymentId:e})})}handleDisconnect(e){console.log(`🔌 WebSocket disconnected: ${e}`),this.state.connected=!1,this.state.connecting=!1,this.stopHeartbeat(),this.emit("connection:status",{connected:!1,timestamp:new Date().toISOString()}),"io client disconnect"!==e&&this.token&&this.scheduleReconnect()}handleError(e){console.error("❌ WebSocket error:",e),this.state.connecting=!1,this.state.error=e.message||"WebSocket connection failed",this.token&&this.scheduleReconnect()}scheduleReconnect(){if(this.state.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.state.error="Max reconnection attempts reached";return}if(this.reconnectTimer)return;let e=Math.min(this.reconnectDelay*Math.pow(2,this.state.reconnectAttempts),3e4);console.log(`🔄 Scheduling reconnect in ${e}ms (attempt ${this.state.reconnectAttempts+1})`),this.reconnectTimer=setTimeout(async()=>{if(this.reconnectTimer=null,this.state.reconnectAttempts++,this.token)try{await this.connect(this.token)}catch(e){console.error("Reconnection failed:",e)}},e)}setupEventListeners(){this.socket&&(this.socket.on("deployment:log",e=>{this.emit("deployment:log",e)}),this.socket.on("deployment:status",e=>{this.emit("deployment:status",e)}),this.socket.on("deployment:metrics",e=>{this.emit("deployment:metrics",e)}),this.socket.on("deployment:error",e=>{this.emit("deployment:error",e)}),this.socket.on("health:status",e=>{this.emit("health:status",e)}),this.socket.on("heartbeat:pong",()=>{}))}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=setInterval(()=>{this.socket?.connected&&this.socket.emit("heartbeat:ping")},this.heartbeatInterval)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}}let a=new i,c=(0,n.v)((e,t)=>({deployments:[],currentDeployment:null,logs:new Map,isLoading:!1,error:null,isWebSocketConnected:!1,wsError:null,fetchDeployments:async()=>{e({isLoading:!0,error:null});try{let t=await s.A.get("/deployments");e({deployments:t.data.deployments||[],isLoading:!1})}catch(t){e({isLoading:!1,error:t.response?.data?.error||"Failed to fetch deployments"})}},fetchDeployment:async t=>{e({isLoading:!0,error:null});try{let o=await s.A.get(`/deployments/${t}`);e({currentDeployment:o.data.deployment,isLoading:!1})}catch(t){e({isLoading:!1,error:t.response?.data?.error||"Failed to fetch deployment"})}},createDeployment:async t=>{e({isLoading:!0,error:null});try{let o=t.get("projectName"),n=t.get("projectDescription"),r=t.get("runtimeType"),i=(await s.A.post("/deploy",{projectName:o,projectDescription:n,runtimeType:r,files:[],config:{env:{},port:8080}})).data.deployment;return e(e=>({deployments:[...e.deployments,i],isLoading:!1})),i}catch(t){throw e({isLoading:!1,error:t.response?.data?.error||"Failed to create deployment"}),t}},deleteDeployment:async t=>{e({isLoading:!0,error:null});try{await s.A.delete(`/deployments/${t}`),e(e=>({deployments:e.deployments.filter(e=>e.id!==t),isLoading:!1}))}catch(t){e({isLoading:!1,error:t.response?.data?.error||"Failed to delete deployment"})}},controlDeployment:async(o,n)=>{e({isLoading:!0,error:null});try{await s.A.post(`/deployments/${o}/${n}`),await t().fetchDeployment(o)}catch(t){e({isLoading:!1,error:t.response?.data?.error||`Failed to ${n} deployment`})}},connectWebSocket:async o=>{try{a.on("connection:status",t=>{e({isWebSocketConnected:t.connected,wsError:t.connected?null:"Connection lost"})}),a.on("deployment:status",e=>{t().updateDeploymentStatus(e.deploymentId,e.status)}),a.on("deployment:log",e=>{t().addLog(e.deploymentId,e)}),a.on("deployment:metrics",t=>{e(e=>({deployments:e.deployments.map(e=>e.id===t.deploymentId?{...e,cpu:t.cpu,memory:t.memory,network:t.network}:e)}))}),a.on("deployment:error",t=>{console.error(`Deployment ${t.deploymentId} error:`,t.error),e({wsError:t.error})}),await a.connect(o),e({isWebSocketConnected:!0,wsError:null})}catch(t){throw console.error("Failed to connect WebSocket:",t),e({isWebSocketConnected:!1,wsError:t.message}),t}},disconnectWebSocket:()=>{a.disconnect(),e({isWebSocketConnected:!1,wsError:null})},subscribeToDeployment:e=>{a.subscribeToDeployment(e)},unsubscribeFromDeployment:e=>{a.unsubscribeFromDeployment(e)},fetchDeploymentLogs:async t=>{try{let o=(await s.A.get(`/websocket/deployments/${t}/logs`)).data.data.logs||[];e(e=>{let n=new Map(e.logs);return n.set(t,o),{logs:n}})}catch(o){console.error(`Failed to fetch logs for deployment ${t}:`,o),e({error:o.response?.data?.error||"Failed to fetch logs"})}},clearError:()=>e({error:null}),updateDeploymentStatus:(t,o)=>{e(e=>({deployments:e.deployments.map(e=>e.id===t?{...e,status:o}:e),currentDeployment:e.currentDeployment?.id===t?{...e.currentDeployment,status:o}:e.currentDeployment}))},addLog:(t,o)=>{e(e=>{let n=new Map(e.logs),s=n.get(t)||[],r={...o,timestamp:o.timestamp||new Date().toISOString()};return s.push(r),s.length>1e3&&s.shift(),s.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),n.set(t,s),{logs:n}})}}))},39727:()=>{},47990:()=>{},52892:(e,t,o)=>{Promise.resolve().then(o.bind(o,6931))},55192:(e,t,o)=>{"use strict";o.d(t,{Wu:()=>l,ZB:()=>c,Zp:()=>i,aR:()=>a});var n=o(60687),s=o(43210),r=o(96241);let i=s.forwardRef(({className:e,...t},o)=>(0,n.jsx)("div",{ref:o,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let a=s.forwardRef(({className:e,...t},o)=>(0,n.jsx)("div",{ref:o,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));a.displayName="CardHeader";let c=s.forwardRef(({className:e,...t},o)=>(0,n.jsx)("div",{ref:o,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle",s.forwardRef(({className:e,...t},o)=>(0,n.jsx)("div",{ref:o,className:(0,r.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let l=s.forwardRef(({className:e,...t},o)=>(0,n.jsx)("div",{ref:o,className:(0,r.cn)("p-6 pt-0",e),...t}));l.displayName="CardContent",s.forwardRef(({className:e,...t},o)=>(0,n.jsx)("div",{ref:o,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},58014:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c,metadata:()=>a});var n=o(37413),s=o(35987),r=o.n(s),i=o(6931);o(82704);let a={title:"CodeRunner2 - Deploy & Monitor",description:"Real-time deployment platform with live monitoring",generator:"v0.dev"};function c({children:e}){return(0,n.jsx)("html",{lang:"en",children:(0,n.jsxs)("body",{className:`${r().className} bg-black text-white antialiased`,children:[e,(0,n.jsx)(i.Toaster,{position:"top-right",theme:"dark",toastOptions:{style:{background:"rgb(23 23 23)",border:"1px solid rgb(64 64 64)",color:"white"}}})]})})}},59556:(e,t,o)=>{"use strict";o.d(t,{A:()=>a,m:()=>i});var n=o(51060),s=o(15659);let r=n.A.create({baseURL:"http://localhost:8080/api",timeout:3e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=s.A.get("auth-token")||localStorage.getItem("auth-token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async e=>{let t=e.config;return e.response?.status!==401||t._retry||(t._retry=!0,s.A.remove("auth-token"),localStorage.removeItem("auth-token")),Promise.reject(e)});let i={auth:{login:(e,t)=>r.post("/auth/login",{email:e,password:t}),register:(e,t)=>r.post("/auth/register",{email:e,password:t}),verify:()=>r.get("/auth/verify"),logout:()=>r.post("/auth/logout")},deployments:{list:()=>r.get("/deployments"),get:e=>r.get(`/deployments/${e}`),create:e=>r.post("/deploy",e),delete:e=>r.delete(`/deployments/${e}`),control:(e,t)=>r.post(`/deployments/${e}/${t}`),logs:(e,t=100)=>r.get(`/websocket/deployments/${e}/logs?tail=${t}`),metrics:e=>r.get(`/metrics/deployment/${e}`)},projects:{list:()=>r.get("/projects"),get:e=>r.get(`/projects/${e}`),create:e=>r.post("/projects",e),update:(e,t)=>r.put(`/projects/${e}`,t),delete:e=>r.delete(`/projects/${e}`)},databases:{listDeployments:()=>r.get("/orchestrator/deployments"),getDeployment:e=>r.get(`/orchestrator/deployments/${e}`),deploy:e=>r.post("/orchestrator/deploy",e),deleteDeployment:e=>r.delete(`/orchestrator/deployments/${e}`),listTemplates:()=>r.get("/orchestrator/templates"),getTemplate:e=>r.get(`/orchestrator/templates/${e}`),listTenants:e=>r.get(`/orchestrator/${e}/tenants`),createTenant:(e,t)=>r.post(`/orchestrator/${e}/tenants`,t),deleteTenant:(e,t)=>r.delete(`/orchestrator/${e}/tenants/${t}`),listBackups:e=>r.get(`/orchestrator/${e}/backups`),createBackup:(e,t)=>r.post(`/orchestrator/${e}/backups`,t),restoreBackup:(e,t)=>r.post(`/orchestrator/${e}/backups/${t}/restore`),deleteBackup:(e,t)=>r.delete(`/orchestrator/${e}/backups/${t}`),getMetrics:e=>r.get(`/orchestrator/${e}/metrics`)},system:{health:()=>r.get("/health"),metrics:()=>r.get("/metrics/current"),status:()=>r.get("/websocket/status")}},a=r},68988:(e,t,o)=>{"use strict";o.d(t,{p:()=>i});var n=o(60687),s=o(43210),r=o(96241);let i=s.forwardRef(({className:e,type:t,...o},s)=>(0,n.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...o}));i.displayName="Input"},82704:()=>{},96241:(e,t,o)=>{"use strict";o.d(t,{cn:()=>r});var n=o(49384),s=o(82348);function r(...e){return(0,s.QP)((0,n.$)(e))}}};