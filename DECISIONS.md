# ⚖️ 核心决策日志 (v2.0)

> **人类专用**: 本文档记录了项目中最重要、最不可轻易更改的核心决策。在对架构或核心功能提出任何修改建议前，AI必须查阅此文档。

## 决策模板

```markdown
### [决策标题]

- **决策ID**: D[XXX]
- **决策日期**: YYYY-MM-DD
- **决策内容**: [清晰地描述最终的决策]。
- **决策理由**: [简要说明为什么做出这个决策，以及它解决了什么问题]。
- **影响范围**: [说明此决策对哪些模块或流程有影响]。
```

---

## 核心架构决策

### 采用“应用装置”模型
- **决策ID**: D001
- **决策日期**: 2025-08-06
- **决策内容**: CodeRunner 的核心产品是“应用装置 (Appliance)”，即基于 AgentSphere 的预定义沙箱模板（如 Node.js 模板、PostgreSQL 模板）。整个后端服务是一个围绕 AgentSphere SDK 的“业务流程编排器”。
- **决策理由**: 此模型极大地简化了系统架构，降低了开发复杂性，并能充分利用 AgentSphere 的能力。
- **影响范围**: 全局。这是 `01-system-design.md` v2.0 的核心基础。

### 使用 PostgreSQL 存储自身状态
- **决策ID**: D002
- **决策日期**: 2025-08-06
- **决策内容**: CodeRunner 自身的用户、项目、部署等元数据，将存储在 PostgreSQL 数据库中。
- **决策理由**: 关系型数据库非常适合管理实体间的清晰关系，且 PostgreSQL 功能强大、稳定可靠。
- **影响范围**: 所有服务的数据库交互层，具体见 `04-database-schema.md`。

---

## 核心产品决策

*(暂无核心产品决策)*
