# Phase 2 æµ‹è¯•è¦†ç›–ç‡å’Œè´¨é‡æ ‡å‡†

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡æ ‡å‡†

### æ€»ä½“è¦†ç›–ç‡ç›®æ ‡

```yaml
Coverage_Targets:
  Unit_Tests:
    Lines: "90%+"
    Branches: "85%+"
    Functions: "95%+"
    Statements: "90%+"
    
  Integration_Tests:
    API_Endpoints: "100% critical paths"
    Service_Integration: "85%+"
    Database_Operations: "90%+"
    
  E2E_Tests:
    User_Journeys: "100% critical flows"
    Browser_Compatibility: "95%+ Chrome, Firefox, Safari"
    Mobile_Responsiveness: "90%+ key screens"
    
  Performance_Tests:
    Load_Testing: "All public endpoints"
    Stress_Testing: "Critical system limits"
    WebSocket_Load: "Real-time features"
```

### æ¨¡å—çº§åˆ«è¦†ç›–ç‡è¦æ±‚

| æ¨¡å— | å½“å‰è¦†ç›–ç‡ | Phase 2 ç›®æ ‡ | ä¼˜å…ˆçº§ |
|------|------------|-------------|--------|
| AuthService | 95.87% | 98%+ | Critical |
| OrchestrationService | 54.93% | 90%+ | Critical |
| DatabaseService | 6.89% | 85%+ | Critical |
| ManifestEngine | 97.67% | 98%+ | High |
| ProjectService | 100% | 100% | High |
| WebSocket Service | 0% | 90%+ | Critical |
| Monitoring Service | 0% | 85%+ | High |
| V0 Frontend | 0% | 80%+ | High |

## ğŸ¯ è´¨é‡æ ‡å‡†å®šä¹‰

### ä»£ç è´¨é‡æŒ‡æ ‡

#### å¤æ‚åº¦æ§åˆ¶
- **åœˆå¤æ‚åº¦**: å•ä¸ªå‡½æ•° â‰¤ 10, å¹³å‡ â‰¤ 5
- **è®¤çŸ¥å¤æ‚åº¦**: å•ä¸ªå‡½æ•° â‰¤ 15, å¹³å‡ â‰¤ 8
- **åµŒå¥—æ·±åº¦**: æœ€å¤§ 4 å±‚
- **å‡½æ•°é•¿åº¦**: æœ€å¤§ 50 è¡Œ (é™¤ç‰¹æ®Šæƒ…å†µ)

#### å¯ç»´æŠ¤æ€§æŒ‡æ ‡
- **é‡å¤ä»£ç **: â‰¤ 3%
- **æŠ€æœ¯å€ºåŠ¡æ¯”ç‡**: â‰¤ 5%
- **ä»£ç å¯è¯»æ€§**: æ‰€æœ‰å…¬å…±æ–¹æ³•å¿…é¡»æœ‰ JSDoc
- **ç±»å‹è¦†ç›–**: TypeScript ä¸¥æ ¼æ¨¡å¼ 100%

### æ€§èƒ½è´¨é‡æ ‡å‡†

#### API å“åº”æ—¶é—´
```yaml
Response_Time_Targets:
  Authentication:
    login: "<200ms"
    register: "<300ms"
    token_refresh: "<100ms"
    
  Project_Management:
    list_projects: "<500ms"
    create_project: "<1s"
    delete_project: "<2s"
    
  Deployment:
    deploy_nodejs: "<30s"
    deploy_database: "<60s"
    deploy_status: "<100ms"
    
  WebSocket:
    connection_time: "<1s"
    message_latency: "<50ms"
    broadcast_time: "<200ms"
```

#### ç³»ç»Ÿèµ„æºé™åˆ¶
- **å†…å­˜ä½¿ç”¨**: åŸºç¡€ â‰¤ 512MB, å³°å€¼ â‰¤ 2GB
- **CPU ä½¿ç”¨**: å¹³å‡ â‰¤ 40%, å³°å€¼ â‰¤ 80%
- **æ•°æ®åº“è¿æ¥**: â‰¤ 50 ä¸ªå¹¶å‘è¿æ¥
- **WebSocket è¿æ¥**: æ”¯æŒ â‰¥ 1000 å¹¶å‘è¿æ¥

### å®‰å…¨è´¨é‡æ ‡å‡†

#### å®‰å…¨è¦†ç›–è¦æ±‚
- **OWASP Top 10**: 100% é˜²æŠ¤è¦†ç›–
- **è¾“å…¥éªŒè¯**: æ‰€æœ‰ç”¨æˆ·è¾“å…¥ 100% éªŒè¯
- **SQL æ³¨å…¥é˜²æŠ¤**: 100% å‚æ•°åŒ–æŸ¥è¯¢
- **XSS é˜²æŠ¤**: æ‰€æœ‰è¾“å‡ºè½¬ä¹‰
- **CSRF é˜²æŠ¤**: æ‰€æœ‰çŠ¶æ€æ”¹å˜æ“ä½œ

#### è®¤è¯æˆæƒæ ‡å‡†
- **JWT å®‰å…¨**: å¼ºå¯†é’¥ + é€‚å½“è¿‡æœŸæ—¶é—´
- **å¯†ç ç­–ç•¥**: æœ€å°å¤æ‚åº¦ + å“ˆå¸Œå­˜å‚¨
- **ä¼šè¯ç®¡ç†**: å®‰å…¨ Cookie + HTTPS Only
- **API æˆæƒ**: ç»†ç²’åº¦æƒé™æ§åˆ¶

## ğŸ§ª æµ‹è¯•åˆ†å±‚ç­–ç•¥

### L1 - å•å…ƒæµ‹è¯• (Unit Tests)
**è¦†ç›–èŒƒå›´**: 90%+ ä»£ç è¦†ç›–ç‡
- çº¯å‡½æ•°å’Œå·¥å…·ç±»æµ‹è¯•
- ä¸šåŠ¡é€»è¾‘å•å…ƒæµ‹è¯•
- è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯å¤„ç†
- Mock å¤–éƒ¨ä¾èµ–

**è´¨é‡è¦æ±‚**:
- æµ‹è¯•éš”ç¦»ï¼šæ¯ä¸ªæµ‹è¯•ç‹¬ç«‹è¿è¡Œ
- å¿«é€Ÿæ‰§è¡Œï¼šå•ä¸ªæµ‹è¯• < 100ms
- å¯è¯»æ€§ï¼šæµ‹è¯•åç§°æè¿°è¡Œä¸º
- è¦†ç›–ç‡ï¼šæ¯ä¸ªå…¬å…±æ–¹æ³•è‡³å°‘ä¸€ä¸ªæµ‹è¯•

### L2 - é›†æˆæµ‹è¯• (Integration Tests)
**è¦†ç›–èŒƒå›´**: 85%+ æœåŠ¡é—´äº¤äº’
- API ç«¯ç‚¹å®Œæ•´æµ‹è¯•
- æ•°æ®åº“æ“ä½œæµ‹è¯•
- æœåŠ¡é—´é€šä¿¡æµ‹è¯•
- ç¬¬ä¸‰æ–¹é›†æˆæµ‹è¯•

**è´¨é‡è¦æ±‚**:
- çœŸå®ç¯å¢ƒï¼šä½¿ç”¨æµ‹è¯•æ•°æ®åº“
- æ•°æ®éš”ç¦»ï¼šæµ‹è¯•é—´æ•°æ®æ¸…ç†
- é”™è¯¯åœºæ™¯ï¼šç½‘ç»œæ•…éšœã€è¶…æ—¶ç­‰
- æ€§èƒ½éªŒè¯ï¼šå“åº”æ—¶é—´åœ¨æ ‡å‡†å†…

### L3 - å¥‘çº¦æµ‹è¯• (Contract Tests)
**è¦†ç›–èŒƒå›´**: 100% API å¥‘çº¦
- Provider å¥‘çº¦éªŒè¯
- Consumer å¥‘çº¦æµ‹è¯•
- API ç‰ˆæœ¬å…¼å®¹æ€§
- æ•°æ®æ ¼å¼éªŒè¯

**è´¨é‡è¦æ±‚**:
- å¥‘çº¦å‡†ç¡®æ€§ï¼šä¸å®é™… API è¡Œä¸ºä¸€è‡´
- ç‰ˆæœ¬å…¼å®¹ï¼šå‘åå…¼å®¹æ€§éªŒè¯
- è‡ªåŠ¨åŒ–ï¼šCI/CD é›†æˆ
- æ–‡æ¡£åŒæ­¥ï¼šå¥‘çº¦ä¸æ–‡æ¡£ä¸€è‡´

### L4 - ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)
**è¦†ç›–èŒƒå›´**: 100% å…³é”®ç”¨æˆ·æµç¨‹
- ç”¨æˆ·æ³¨å†Œç™»å½•æµç¨‹
- é¡¹ç›®éƒ¨ç½²å®Œæ•´æµç¨‹
- WebSocket å®æ—¶åŠŸèƒ½
- é”™è¯¯å¤„ç†å’Œæ¢å¤

**è´¨é‡è¦æ±‚**:
- çœŸå®ç”¨æˆ·åœºæ™¯ï¼šæ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œ
- è·¨æµè§ˆå™¨ï¼šChromeã€Firefoxã€Safari
- ç§»åŠ¨ç«¯é€‚é…ï¼šå“åº”å¼è®¾è®¡éªŒè¯
- å¯è®¿é—®æ€§ï¼šWCAG 2.1 AA æ ‡å‡†

### L5 - æ€§èƒ½æµ‹è¯• (Performance Tests)
**è¦†ç›–èŒƒå›´**: æ‰€æœ‰å…¬å…±æ¥å£
- è´Ÿè½½æµ‹è¯•ï¼šæ­£å¸¸è´Ÿè½½ä¸‹æ€§èƒ½
- å‹åŠ›æµ‹è¯•ï¼šæé™è´Ÿè½½æµ‹è¯•
- å®¹é‡æµ‹è¯•ï¼šç³»ç»Ÿå®¹é‡éªŒè¯
- ç¨³å®šæ€§æµ‹è¯•ï¼šé•¿æ—¶é—´è¿è¡Œ

**è´¨é‡è¦æ±‚**:
- åŸºå‡†æµ‹è¯•ï¼šå»ºç«‹æ€§èƒ½åŸºçº¿
- å›å½’æ£€æµ‹ï¼šæ€§èƒ½é€€åŒ–æ£€æµ‹
- èµ„æºç›‘æ§ï¼šCPUã€å†…å­˜ã€IO
- è‡ªåŠ¨åŒ–æŠ¥å‘Šï¼šæ€§èƒ½è¶‹åŠ¿åˆ†æ

## ğŸ“‹ æµ‹è¯•æ‰§è¡Œç­–ç•¥

### æµ‹è¯•é‡‘å­—å¡”åˆ†å¸ƒ
```
     E2E Tests (5%)      <- å…³é”®ç”¨æˆ·æµç¨‹
    ________________
   /                \
  /  Integration (25%) \   <- API å’ŒæœåŠ¡é›†æˆ
 /____________________\
/                      \
\   Unit Tests (70%)   /   <- ä¸šåŠ¡é€»è¾‘å’Œå·¥å…·å‡½æ•°
 \____________________/
```

### æµ‹è¯•ç¯å¢ƒé…ç½®

#### å¼€å‘ç¯å¢ƒ (Development)
- **ç›®çš„**: å¿«é€Ÿåé¦ˆå’Œè°ƒè¯•
- **è¿è¡Œ**: å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
- **é¢‘ç‡**: ä»£ç å˜æ›´æ—¶è‡ªåŠ¨è¿è¡Œ
- **å·¥å…·**: Jest watch mode

#### æµ‹è¯•ç¯å¢ƒ (Testing)
- **ç›®çš„**: å®Œæ•´åŠŸèƒ½éªŒè¯
- **è¿è¡Œ**: æ‰€æœ‰æµ‹è¯•ç±»å‹
- **é¢‘ç‡**: PR æäº¤æ—¶
- **å·¥å…·**: å®Œæ•´ CI/CD ç®¡é“

#### é¢„å‘å¸ƒç¯å¢ƒ (Staging)
- **ç›®çš„**: ç”Ÿäº§ç¯å¢ƒéªŒè¯
- **è¿è¡Œ**: E2E + æ€§èƒ½ + å®‰å…¨æµ‹è¯•
- **é¢‘ç‡**: éƒ¨ç½²å‰éªŒè¯
- **å·¥å…·**: ç”Ÿäº§çº§é…ç½®æµ‹è¯•

### æµ‹è¯•æ•°æ®ç®¡ç†

#### æµ‹è¯•æ•°æ®ç­–ç•¥
- **æ•°æ®éš”ç¦»**: æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹æ•°æ®é›†
- **æ•°æ®æ¸…ç†**: æµ‹è¯•åè‡ªåŠ¨æ¸…ç†
- **æ•°æ®ç”Ÿæˆ**: Factory æ¨¡å¼ç”Ÿæˆæµ‹è¯•æ•°æ®
- **æ•°æ®ç‰ˆæœ¬**: æµ‹è¯•æ•°æ®ç‰ˆæœ¬æ§åˆ¶

#### æµ‹è¯•ç¯å¢ƒæ•°æ®åº“
- **éš”ç¦»æ€§**: ç‹¬ç«‹æµ‹è¯•æ•°æ®åº“
- **ä¸€è‡´æ€§**: ä¸ç”Ÿäº§ç¯å¢ƒç»“æ„ä¸€è‡´
- **æ€§èƒ½**: ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œé€Ÿåº¦
- **å®‰å…¨æ€§**: ä¸åŒ…å«æ•æ„Ÿæ•°æ®

## ğŸ” è´¨é‡ç›‘æ§å’Œåº¦é‡

### æŒç»­è´¨é‡ç›‘æ§

#### ä»£ç è´¨é‡åº¦é‡
- **è¦†ç›–ç‡è¶‹åŠ¿**: æ¯æ—¥è¦†ç›–ç‡å˜åŒ–ç›‘æ§
- **æŠ€æœ¯å€ºåŠ¡**: SonarQube è´¨é‡åˆ†æ
- **ä»£ç é‡å¤**: é‡å¤ä»£ç ç™¾åˆ†æ¯”ç›‘æ§
- **å¤æ‚åº¦ç›‘æ§**: ä»£ç å¤æ‚åº¦è¶‹åŠ¿åˆ†æ

#### æµ‹è¯•è´¨é‡åº¦é‡
- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: æµ‹è¯•å¥—ä»¶æ‰§è¡Œæ—¶é—´ç›‘æ§
- **æµ‹è¯•ç¨³å®šæ€§**: Flaky æµ‹è¯•æ£€æµ‹å’Œä¿®å¤
- **æµ‹è¯•è¦†ç›–ç‡**: æ–°åŠŸèƒ½æµ‹è¯•è¦†ç›–ç‡
- **æµ‹è¯•æ•ˆæœ**: ç¼ºé™·æ•è·ç‡åˆ†æ

### è´¨é‡é—¨ç¦ (Quality Gates)

#### æäº¤é˜¶æ®µ (Commit Stage)
- å•å…ƒæµ‹è¯•é€šè¿‡ç‡ 100%
- ä»£ç è¦†ç›–ç‡ â‰¥ 90%
- é™æ€ä»£ç åˆ†æé€šè¿‡
- ç¼–è¯‘æˆåŠŸæ— è­¦å‘Š

#### é›†æˆé˜¶æ®µ (Integration Stage)
- æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡
- API å¥‘çº¦æµ‹è¯•é€šè¿‡
- å®‰å…¨æ‰«ææ— é«˜å±æ¼æ´
- æ€§èƒ½æµ‹è¯•æ»¡è¶³åŸºçº¿

#### å‘å¸ƒé˜¶æ®µ (Release Stage)
- E2E æµ‹è¯•å…¨éƒ¨é€šè¿‡
- æ€§èƒ½æµ‹è¯•æ»¡è¶³ SLA
- å®‰å…¨æµ‹è¯•å®Œå…¨é€šè¿‡
- ç”¨æˆ·éªŒæ”¶æµ‹è¯•é€šè¿‡

## ğŸš€ Phase 2 å®æ–½è®¡åˆ’

### Week 1-2: æµ‹è¯•åŸºç¡€è®¾æ–½
- [ ] å®Œå–„ Jest é…ç½®å’Œ TypeScript æ”¯æŒ
- [ ] è®¾ç½® Playwright E2E æµ‹è¯•æ¡†æ¶
- [ ] é…ç½®æµ‹è¯•æ•°æ®åº“å’Œæ•°æ®ç®¡ç†
- [ ] å»ºç«‹ CI/CD æµ‹è¯•ç®¡é“

### Week 3-4: æ ¸å¿ƒæ¨¡å—æµ‹è¯•
- [ ] OrchestrationService å•å…ƒæµ‹è¯• (54.93% â†’ 90%+)
- [ ] DatabaseService å•å…ƒæµ‹è¯• (6.89% â†’ 85%+)
- [ ] WebSocket åŠŸèƒ½å®Œæ•´æµ‹è¯•å¥—ä»¶
- [ ] ç›‘æ§ç³»ç»Ÿæµ‹è¯•æ¡†æ¶

### Week 5-6: é›†æˆå’Œ E2E æµ‹è¯•
- [ ] API ç«¯ç‚¹é›†æˆæµ‹è¯•å®Œå–„
- [ ] V0 å‰ç«¯ E2E æµ‹è¯•å®æ–½
- [ ] WebSocket å®æ—¶åŠŸèƒ½ E2E æµ‹è¯•
- [ ] è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

### Week 7-8: æ€§èƒ½å’Œå®‰å…¨æµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•å»ºç«‹
- [ ] è´Ÿè½½å’Œå‹åŠ›æµ‹è¯•å®æ–½
- [ ] å®‰å…¨æµ‹è¯•è‡ªåŠ¨åŒ–
- [ ] è´¨é‡ç›‘æ§ä»ªè¡¨æ¿

### è´¨é‡éªŒæ”¶æ ‡å‡†
1. **è¦†ç›–ç‡è¾¾æ ‡**: æ‰€æœ‰æ¨¡å—è¾¾åˆ°ç›®æ ‡è¦†ç›–ç‡
2. **æ€§èƒ½è¾¾æ ‡**: æ‰€æœ‰ API å“åº”æ—¶é—´è¾¾æ ‡
3. **å®‰å…¨è¾¾æ ‡**: å®‰å…¨æ‰«ææ— é«˜å±æ¼æ´
4. **ç¨³å®šæ€§è¾¾æ ‡**: CI/CD ç®¡é“æˆåŠŸç‡ â‰¥ 95%
5. **æ–‡æ¡£å®Œæ•´**: æµ‹è¯•æ–‡æ¡£å’Œæœ€ä½³å®è·µæ–‡æ¡£

---

*æ­¤æ ‡å‡†æ–‡æ¡£å°†éšç€ Phase 2 å¼€å‘è¿›å±•æŒç»­æ›´æ–°å’Œå®Œå–„*